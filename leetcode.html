<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeetCode Stats - Srinivasan Sundararajan</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 2rem;
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: #666;
            font-size: 1.2rem;
            font-weight: 300;
        }

        .nav-link {
            display: inline-block;
            margin-top: 1rem;
            color: #667eea;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border: 2px solid #667eea;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #667eea;
            color: white;
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 2rem;
        }

        section {
            margin-bottom: 2rem;
        }

        section:last-child {
            margin-bottom: 0;
        }

        h2 {
            color: #667eea;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #667eea;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .difficulty-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .difficulty-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 12px;
            border-left: 4px solid;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .difficulty-card.easy {
            border-left-color: #00b8a3;
        }

        .difficulty-card.medium {
            border-left-color: #ffc01e;
        }

        .difficulty-card.hard {
            border-left-color: #ff375f;
        }

        .difficulty-card h3 {
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .difficulty-card .count {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 0.25rem;
        }

        .difficulty-card .percentage {
            color: #666;
            font-size: 0.9rem;
        }

        .leetcode-link {
            display: inline-block;
            margin-top: 1rem;
            color: #667eea;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border: 2px solid #667eea;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .leetcode-link:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 0.5s ease;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #667eea;
            font-size: 1.1rem;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #c33;
        }

        footer {
            text-align: center;
            padding: 1rem;
            color: white;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .content {
                padding: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>LeetCode Statistics</h1>
            <p class="subtitle">My Problem Solving Journey</p>
            <a href="index.html" class="nav-link">← Back to Home</a>
        </header>

        <div class="content">
            <div id="loading-message" class="loading">Loading LeetCode stats</div>
            <section class="overview-section" id="stats-section" style="display: none;">
                <h2>Overview</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-solved">0</div>
                        <div class="stat-label">Total Problems Solved</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="acceptance-rate">0%</div>
                        <div class="stat-label">Acceptance Rate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="ranking">-</div>
                        <div class="stat-label">Ranking</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="contribution-points">0</div>
                        <div class="stat-label">Contribution Points</div>
                    </div>
                </div>
            </section>

            <section class="difficulty-section">
                <h2>Problems by Difficulty</h2>
                <div class="difficulty-breakdown">
                    <div class="difficulty-card easy">
                        <h3>Easy</h3>
                        <div class="count" id="easy-count">0</div>
                        <div class="percentage" id="easy-percentage">0% of total</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="easy-progress" style="width: 0%">0%</div>
                        </div>
                    </div>
                    <div class="difficulty-card medium">
                        <h3>Medium</h3>
                        <div class="count" id="medium-count">0</div>
                        <div class="percentage" id="medium-percentage">0% of total</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="medium-progress" style="width: 0%">0%</div>
                        </div>
                    </div>
                    <div class="difficulty-card hard">
                        <h3>Hard</h3>
                        <div class="count" id="hard-count">0</div>
                        <div class="percentage" id="hard-percentage">0% of total</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="hard-progress" style="width: 0%">0%</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="link-section" style="text-align: center;">
                <a href="https://leetcode.com/u/SriniSundararajan/" target="_blank" class="leetcode-link">
                    View My LeetCode Profile →
                </a>
            </section>
        </div>

        <footer>
            <p>&copy; 2026 Srinivasan Sundararajan. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // LeetCode username - update this if needed
        const LEETCODE_USERNAME = 'SriniSundararajan';
        
        // Loading state
        let isLoading = true;
        
        // Default/fallback stats
        let leetcodeStats = {
            totalSolved: 0,
            easy: 0,
            medium: 0,
            hard: 0,
            acceptanceRate: 0,
            ranking: 0,
            contributionPoints: 0
        };

        // Fetch LeetCode stats from GraphQL API
        async function fetchLeetCodeStats() {
            const graphqlQuery = {
                query: `
                    query getUserProfile($username: String!) {
                        matchedUser(username: $username) {
                            username
                            submitStats: submitStatsGlobal {
                                acSubmissionNum {
                                    difficulty
                                    count
                                    submissions
                                }
                            }
                            profile {
                                ranking
                                userAvatar
                                realName
                            }
                            contributions {
                                points
                            }
                        }
                    }
                `,
                variables: {
                    username: LEETCODE_USERNAME
                }
            };

            try {
                // Try direct API call first
                const response = await fetch('https://leetcode.com/graphql', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Referer': 'https://leetcode.com',
                        'Origin': 'https://leetcode.com'
                    },
                    body: JSON.stringify(graphqlQuery)
                });

                if (response.ok) {
                    const data = await response.json();
                    if (data.data && data.data.matchedUser) {
                        parseLeetCodeData(data.data.matchedUser);
                        return;
                    }
                }
            } catch (error) {
                console.log('Direct API call failed, trying alternative method...', error);
            }

            // Fallback: Try using alternative APIs
            try {
                // Try alternative LeetCode stats API
                const altResponse = await fetch(`https://leetcode-api-fawn.vercel.app/${LEETCODE_USERNAME}`);
                if (altResponse.ok) {
                    const altData = await altResponse.json();
                    if (altData.status === 'success' && altData.data) {
                        parseAlternativeData(altData.data);
                        return;
                    }
                }
            } catch (error) {
                console.log('Alternative API 1 failed', error);
            }

            // Try another alternative API
            try {
                const altResponse2 = await fetch(`https://leetcode-stats-api.herokuapp.com/${LEETCODE_USERNAME}`);
                if (altResponse2.ok) {
                    const altData = await altResponse2.json();
                    parseAlternativeData(altData);
                    return;
                }
            } catch (error) {
                console.log('Alternative API 2 failed', error);
            }

            // If all methods fail, show error message
            showError('Unable to fetch LeetCode stats. Please check your username or try again later.');
        }

        // Parse LeetCode GraphQL response
        function parseLeetCodeData(userData) {
            if (userData.submitStats && userData.submitStats.acSubmissionNum) {
                let easy = 0, medium = 0, hard = 0;
                
                userData.submitStats.acSubmissionNum.forEach(item => {
                    if (item.difficulty === 'Easy') easy = item.count;
                    else if (item.difficulty === 'Medium') medium = item.count;
                    else if (item.difficulty === 'Hard') hard = item.count;
                });

                leetcodeStats = {
                    totalSolved: easy + medium + hard,
                    easy: easy,
                    medium: medium,
                    hard: hard,
                    acceptanceRate: calculateAcceptanceRate(userData.submitStats.acSubmissionNum),
                    ranking: userData.profile?.ranking || 0,
                    contributionPoints: userData.contributions?.points || 0
                };
            }
            
            updateUI();
        }

        // Parse alternative API response format
        function parseAlternativeData(data) {
            // Handle different API response formats
            const totalSolved = data.totalSolved || data.totalSolvedQuestions || 
                               (data.easySolved + data.mediumSolved + data.hardSolved) || 0;
            const easy = data.easySolved || data.easy || 0;
            const medium = data.mediumSolved || data.medium || 0;
            const hard = data.hardSolved || data.hard || 0;
            
            leetcodeStats = {
                totalSolved: totalSolved,
                easy: easy,
                medium: medium,
                hard: hard,
                acceptanceRate: data.acceptanceRate || data.acceptance || 0,
                ranking: data.ranking || data.rank || 0,
                contributionPoints: data.contributionPoints || data.contribution || 0
            };
            updateUI();
        }

        // Calculate acceptance rate from submission data
        function calculateAcceptanceRate(submissions) {
            if (!submissions || submissions.length === 0) return 0;
            
            let totalAccepted = 0;
            let totalSubmissions = 0;
            
            submissions.forEach(item => {
                totalAccepted += item.count;
                totalSubmissions += item.submissions;
            });
            
            return totalSubmissions > 0 ? ((totalAccepted / totalSubmissions) * 100).toFixed(1) : 0;
        }

        // Update the UI with fetched stats
        function updateUI() {
            isLoading = false;
            
            // Hide loading message and show stats
            const loadingMsg = document.getElementById('loading-message');
            const statsSection = document.getElementById('stats-section');
            if (loadingMsg) loadingMsg.style.display = 'none';
            if (statsSection) statsSection.style.display = 'block';
            
            // Calculate percentages
            const total = leetcodeStats.easy + leetcodeStats.medium + leetcodeStats.hard;
            const easyPercent = total > 0 ? (leetcodeStats.easy / total * 100).toFixed(1) : 0;
            const mediumPercent = total > 0 ? (leetcodeStats.medium / total * 100).toFixed(1) : 0;
            const hardPercent = total > 0 ? (leetcodeStats.hard / total * 100).toFixed(1) : 0;

            // Update DOM elements
            document.getElementById('total-solved').textContent = leetcodeStats.totalSolved;
            document.getElementById('acceptance-rate').textContent = leetcodeStats.acceptanceRate + '%';
            document.getElementById('ranking').textContent = leetcodeStats.ranking > 0 ? leetcodeStats.ranking.toLocaleString() : '-';
            document.getElementById('contribution-points').textContent = leetcodeStats.contributionPoints;

            document.getElementById('easy-count').textContent = leetcodeStats.easy;
            document.getElementById('easy-percentage').textContent = easyPercent + '% of total';
            document.getElementById('easy-progress').style.width = easyPercent + '%';
            document.getElementById('easy-progress').textContent = easyPercent + '%';

            document.getElementById('medium-count').textContent = leetcodeStats.medium;
            document.getElementById('medium-percentage').textContent = mediumPercent + '% of total';
            document.getElementById('medium-progress').style.width = mediumPercent + '%';
            document.getElementById('medium-progress').textContent = mediumPercent + '%';

            document.getElementById('hard-count').textContent = leetcodeStats.hard;
            document.getElementById('hard-percentage').textContent = hardPercent + '% of total';
            document.getElementById('hard-progress').style.width = hardPercent + '%';
            document.getElementById('hard-progress').textContent = hardPercent + '%';

            // Animate the stat values
            animateValue('total-solved', 0, leetcodeStats.totalSolved, 1000);
            animateValue('acceptance-rate', 0, parseFloat(leetcodeStats.acceptanceRate), 1000);
            if (leetcodeStats.ranking > 0) {
                animateValue('ranking', 0, leetcodeStats.ranking, 1000);
            }
            animateValue('contribution-points', 0, leetcodeStats.contributionPoints, 1000);
        }

        // Show error message
        function showError(message) {
            isLoading = false;
            const loadingMsg = document.getElementById('loading-message');
            if (loadingMsg) {
                loadingMsg.style.display = 'none';
            }
            const content = document.querySelector('.content');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.innerHTML = `<strong>Error:</strong> ${message}<br><small>Note: Due to CORS restrictions, you may need to use a serverless function or backend proxy to fetch LeetCode stats. See the code comments for alternative solutions.</small>`;
            content.insertBefore(errorDiv, content.firstChild);
        }

        // Animate the stat values
        function animateValue(id, start, end, duration) {
            const element = document.getElementById(id);
            if (!element) return;
            
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;
            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    if (id === 'acceptance-rate') {
                        element.textContent = parseFloat(end).toFixed(1) + '%';
                    } else if (id === 'ranking') {
                        element.textContent = end > 0 ? Math.floor(end).toLocaleString() : '-';
                    } else {
                        element.textContent = Math.floor(end);
                    }
                    clearInterval(timer);
                } else {
                    if (id === 'acceptance-rate') {
                        element.textContent = current.toFixed(1) + '%';
                    } else if (id === 'ranking') {
                        element.textContent = current > 0 ? Math.floor(current).toLocaleString() : '-';
                    } else {
                        element.textContent = Math.floor(current);
                    }
                }
            }, 16);
        }

        // Fetch stats on page load
        document.addEventListener('DOMContentLoaded', () => {
            fetchLeetCodeStats();
        });
    </script>
</body>
</html>

